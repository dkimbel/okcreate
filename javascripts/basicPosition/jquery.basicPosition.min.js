(function(c){c.positionAt=function(h,f){function k(c,d,b,a,e){var g;a=f.relativeTo[0]==h.parent()[0]?0:a;var j={top:"topOrLeft",left:"topOrLeft",center:"center",right:"bottomOrRight",bottom:"bottomOrRight"};c=j[c];d=j[d];switch(d){case "topOrLeft":g={topOrLeft:a,center:a+b/2,bottomOrRight:a+b};break;case "center":g={topOrLeft:a-e/2,center:a+b/2-e/2,bottomOrRight:a+b-e/2};break;case "bottomOrRight":g={topOrLeft:a-e,center:a+b/2-e,bottomOrRight:a+b-e}}return g[c]}f=c.extend({position:{x:"center",y:"center"},
relativeTo:c("body"),constrain:!1,margin:{x:0,y:0},offset:{top:0,left:0},registration:{x:"center",y:"center"}},f);var b={},d=c(f.relativeTo),e,l="fixed"==h.css("position");e=c.measure(d,function(){return c.extend(c(d).offset(),{width:d.outerWidth(),height:d.outerHeight()},d[0]==window?{top:l?0:d.scrollTop(),left:l?0:d.scrollLeft()}:null)});if(!1!==f.constrain){var b=f.width||h.outerWidth(),j=f.height||h.outerHeight(),g,a=f;"function"==typeof a.margin?g=a.margin(h,d):"number"==typeof a.margin?g={x:a.margin,
y:a.margin}:c.isPlainObject(a.margin)&&(g=a.margin);g.x||(g.x=0);g.y||(g.y=0);b>d.outerWidth()-2*g.x&&(a=d.outerWidth()-2*g.x,j*=a/b,b=a);j>d.outerHeight()-2*g.y&&(a=d.outerHeight()-2*g.y,b*=a/j,j=a);b={height:j,width:b}}return c.extend(b,{left:k(f.position.x,f.registration.x,e.width,e.left,b.width||h.outerWidth())+(f.offset.left||0),top:k(f.position.y,f.registration.y,e.height,e.top,b.height||h.outerHeight())+(f.offset.top||0)})};c.fn.positionAt=function(h){h.relativeTo[0]!=this.parent()[0]&&this.css({position:"fixed"==
this.css("position")?"fixed":"absolute"}).appendTo("body");return this.css(c.positionAt(this,h))};c.measure=function(h,f){var k=[],b=h.parents().andSelf().filter(":hidden"),d,e;b.each(function(){e=c(this).attr("style");e="undefined"==typeof e?"":e;k.push(e);c(this).attr("style",e+" display: block !important; left:-10000; position: absolute;")});d=f(h);b.each(function(){c(this).attr("style",k.shift())});return d}})(jQuery);
